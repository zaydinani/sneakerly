jQuery(document).ready(function(e){"use strict";e(document).ready(function(){e(".wcgs-settings").removeClass("wcgs-preloader")}),e(document).on("click",".wcgs-upload-image",function(i){i.preventDefault();var a=e(this).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val();if(""===a)var s=[];else s=JSON.parse(a);var t,n=e(this).parents(".woocommerce_variation").find(".variable_post_id").val();n="#"+n,t=wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),t.open(),t.on("update",function(i){i.models.map(function(i){var a=i.toJSON(),t=a.sizes.thumbnail?a.sizes.thumbnail.url:a.sizes.full.url;s.push(i.id),2>=s.length&&e(".wcgs-gallery-items"+n).append('<div class="wcgs-image" data-attachmentid="'+a.id+'"><img src="'+t+'" style="max-width:100%;display:inline-block;" /><div class="wcgs-image-remover"><span class="dashicons dashicons-no"></span></div></div>'),e(".wcgs-gallery-items"+n).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(JSON.stringify(s)).trigger("change")}),s.length>0&&(e(".wcgs-gallery-items"+n).next("p").find(".wcgs-upload-image").hide(),e(".wcgs-gallery-items"+n).next("p").find(".wcgs-edit").show(),e(".wcgs-gallery-items"+n).next("p").find(".wcgs-remove-all-images").show(),e(".wcgs-gallery-items"+n).next("p").find(".wcgs-upload-more-image").show()),s.length>2&&e(".wcgs-gallery-items"+n).next("p").find(".wcgs-pro-notice").show()})}),e(document).on("click",".wcgs-upload-more-image",function(i){i.preventDefault();var a=e(this).parents(".woocommerce_variation").find(".variable_post_id").val();a="#"+a;var s=e(this).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(),t=JSON.parse(s);window.wp.media.gallery.edit('[gallery ids="'+t+'"]').on("update",function(i){var s=[];e(".wcgs-gallery-items"+a).empty(),i.models.map(function(i){var t=i.toJSON(),n=t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url;s.push(i.id),2>=s.length&&e(".wcgs-gallery-items"+a).append('<div class="wcgs-image" data-attachmentid="'+t.id+'"><img src="'+n+'" style="max-width:100%;display:inline-block;" /><div class="wcgs-image-remover"><span class="dashicons dashicons-no"></span></div></div>'),e(".wcgs-gallery-items"+a).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(JSON.stringify(s)).trigger("change")}),s.length>0&&(e(".wcgs-gallery-items"+a).next("p").find(".wcgs-upload-image").hide(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-edit").show(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-remove-all-images").show(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-upload-more-image").show()),s.length>2&&e(".wcgs-gallery-items"+a).next("p").find(".wcgs-pro-notice").show()}),e(document).find(".media-menu-item:contains('Add to Gallery')").click()}),e(document).on("click",".wcgs-remove-all-images",function(i){i.preventDefault();var a=e(this).parents(".woocommerce_variation").find(".variable_post_id").val();a="#"+a,e(".wcgs-gallery-items"+a+" .wcgs-image").remove();var s=[];e(".wcgs-gallery-items"+a).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(JSON.stringify(s)).trigger("change"),e(this).hide(),e(this).siblings(".wcgs-upload-more-image").hide(),e(this).siblings(".wcgs-edit").hide(),e(this).siblings(".wcgs-upload-image").show(),e(this).siblings(".wcgs-pro-notice").hide()}),e(document).on("click",".wcgs-image-remover",function(i){i.preventDefault();var a=e(this).parents(".woocommerce_variation").find(".variable_post_id").val();a="#"+a;var s=e(this).parent(".wcgs-image").data("attachmentid"),t=e(this).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(),n=JSON.parse(t),l=n.indexOf(parseInt(s));l>-1&&(n.splice(l,1),e(this).parent(".wcgs-image").remove(),e(".wcgs-gallery-items"+a).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(JSON.stringify(n)).trigger("change")),0==n.length&&(e(".wcgs-gallery-items"+a).next("p").find(".wcgs-upload-image").show(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-edit").hide(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-remove-all-images").hide(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-upload-more-image").hide()),n.length>2&&e(".wcgs-gallery-items"+a).next("p").find(".wcgs-pro-notice").show()}),e(document).on("click",".wcgs-edit",function(i){i.preventDefault();var a=e(this).parents(".woocommerce_variation").find(".variable_post_id").val();a="#"+a;var s=e(this).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(),t=JSON.parse(s);window.wp.media.gallery.edit('[gallery ids="'+t+'"]').on("update",function(i){var s=[];e(".wcgs-gallery-items"+a).empty(),i.models.map(function(i){var t=i.toJSON(),n=t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url;s.push(i.id),2>=s.length&&e(".wcgs-gallery-items"+a).append('<div class="wcgs-image" data-attachmentid="'+t.id+'"><img src="'+n+'" style="max-width:100%;display:inline-block;" /><div class="wcgs-image-remover"><span class="dashicons dashicons-no"></span></div></div>'),e(".wcgs-gallery-items"+a).parents(".woocommerce_variable_attributes").find(".wcgs-gallery").val(JSON.stringify(s)).trigger("change")}),s.length>0&&(e(".wcgs-gallery-items"+a).next("p").find(".wcgs-upload-image").hide(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-edit").show(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-remove-all-images").show(),e(".wcgs-gallery-items"+a).next("p").find(".wcgs-upload-more-image").show()),s.length>2&&e(".wcgs-gallery-items"+a).next("p").find(".wcgs-pro-notice").show()})}),e(document).on("click",".woocommerce_variation",function(){var i=e(this).find(".wcgs-variation-gallery");e(this).find(".form-row.form-row-full.options").before(e(i))}),jQuery(document).on("click",".wqv-notice .notice-dismiss",function(){var e=jQuery(this).parent(".wqv-notice").data("nonce");jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"dismiss_wqv_notice",ajax_nonce:e}})}),jQuery(document).on("click",".wcs-notice .notice-dismiss",function(){var e=jQuery(this).parent(".wcs-notice").data("nonce");jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"dismiss_wcs_notice",ajax_nonce:e}})})});