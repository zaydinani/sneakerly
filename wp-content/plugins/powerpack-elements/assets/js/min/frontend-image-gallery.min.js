!function(g){g(window).on("elementor/frontend/init",()=>{class e extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{container:".pp-image-gallery-container",gallery:".pp-image-gallery",justifiedGallery:".pp-image-gallery-justified",filterItems:".pp-gallery-filter"}}}getDefaultElements(){var e=this.getSettings("selectors");return{$container:this.$element.find(e.container),$gallery:this.$element.find(e.gallery),$justifiedGallery:this.$element.find(e.justifiedGallery),$filterItems:this.$element.find(e.filterItems)}}bindEvents(){const t=this.elements.$container.data("settings"),n=this.elements.$gallery,i=this.elements.$filterItems,l=this.getID(),s=this.getElementSettings("lightbox_library"),a=[],o=[];if(!elementorFrontend.isEditMode()&&(n.hasClass("pp-image-gallery-masonry")||n.hasClass("pp-image-gallery-filter-enabled")||"yes"===t.pagination)){var r="fitRows";n.hasClass("pp-image-gallery-masonry")&&(r="masonry");let e="";g(i).each(function(){""!==e&&e!==undefined||(e=g(this).attr("data-default"))});var d={itemSelector:".pp-grid-item-wrap",layoutMode:r,percentPosition:!0,filter:e},p={};this.elements.$container.imagesLoaded(function(){p=n.isotope(d),n.find(".pp-gallery-slide-image").on("load",function(){g(this).hasClass("lazyloaded")||setTimeout(function(){n.isotope("layout")},500)})}),this.elements.$container.on("click",".pp-gallery-filter",function(){var e=g(this),t=e.attr("data-filter"),i=e.attr("data-gallery-index"),a=n.find(t);"*"===t&&(a=n.find(".pp-grid-item-wrap")),g(a).each(function(){var e=g(this).find(".pp-image-gallery-item-link");"fancybox"===s?e.attr("data-fancybox",i+"_"+l):e.attr("data-elementor-lightbox-slideshow",i+"_"+l)}),e.siblings().removeClass("pp-active"),e.addClass("pp-active"),p.isotope({filter:t})}),g(".pp-filters-dropdown").on("change",function(){var e=this.value,t=g(this).find(":selected").attr("data-gallery-index"),i=n.find(e);"*"===e&&(i=n.find(".pp-grid-item-wrap")),g(i).each(function(){var e=g(this).find(".pp-image-gallery-item-link");"fancybox"===s?e.attr("data-fancybox",t+"_"+l):e.attr("data-elementor-lightbox-slideshow",t+"_"+l)}),p.isotope({filter:e})}),this.hashChange(),g(window).on("hashchange",function(){this.hashChange()}.bind(this)),elementorFrontend.elements.$window.on("elementor-pro/motion-fx/recalc",function(){p.isotope("layout")})}this.initTilt(t,n),this.initjustifiedLayout(t),this.initLightbox(),n.find(".pp-grid-item-wrap").each(function(){o.push(g(this).data("item-id"))});const h=this;this.elements.$container.find(".pp-gallery-load-more").on("click",function(e){e.preventDefault(),g(this).addClass("disabled pp-loading"),0<a.length?h.renderGalleryItems(a,o):(e={action:"pp_gallery_get_images",pp_action:"pp_gallery_get_images",settings:t},g.ajax({type:"post",url:window.location.href.split("#").shift(),context:this,data:e,success:function(e){e.success&&((e=e.data.items)&&g(e).each(function(){g(this).hasClass("pp-grid-item-wrap")&&a.push(this)}),h.renderGalleryItems(a,o))},error:function(e,t){console.log(t)}}))})}hashChange(){setTimeout(function(){location.hash&&0<g(location.hash).length&&g(location.hash).parent().hasClass("pp-gallery-filters")&&g(location.hash).trigger("click")},500)}renderGalleryItems(e,t){const i=this.elements.$container.data("settings"),a=this.elements.$gallery,n=a.attr("id"),l=i.tilt_enable!==undefined?i.tilt_enable:"",s=this.elements.$justifiedGallery;var o,r;this.elements.$container.find(".pp-gallery-load-more").removeClass("disabled pp-loading"),0<e.length&&(o=1,r=[],g(e).each(function(){var e=g(this).data("item-id");if(-1===g.inArray(e,t)){if(!(o<=parseInt(i.per_page,10)))return!1;t.push(e),r.push(this),o++}}),0<r.length&&(r=g(r)).imagesLoaded(function(){a.isotope("insert",r),setTimeout(function(){a.isotope("layout")},500),"yes"===l&&g(a).find(".pp-grid-item").tilt({disableAxis:i.tilt_axis,maxTilt:i.tilt_amount,scale:i.tilt_scale,speed:i.tilt_speed})}),0<s.length&&s.imagesLoaded(function(){}).done(function(e){setTimeout(function(){s.justifiedGallery("norewind")},200)}),e.length===t.length&&this.elements.$container.find(".pp-gallery-pagination").hide(),0<g(e='.pp-grid-item-wrap .pp-image-gallery-item-link[data-fancybox="'+n+'"]').length)&&g(e).fancybox({loop:!0})}initjustifiedLayout(t){const i=this.elements.$justifiedGallery;0<i.length&&i.imagesLoaded(function(){}).done(function(e){i.justifiedGallery({rowHeight:t.row_height,lastRow:t.last_row,selector:"div",waitThumbnailsLoad:!0,margins:t.image_spacing,border:0})})}initLightbox(){var e='.pp-grid-item-wrap .pp-image-gallery-item-link[data-fancybox="'+this.elements.$gallery.attr("id")+'"]',t=this.elements.$gallery.data("fancybox-settings");0<g(e).length&&g(e).fancybox(t)}initTilt(e,t){"yes"===(e.tilt_enable!==undefined?e.tilt_enable:"")&&g(t).find(".pp-image-gallery-thumbnail-wrap").tilt({disableAxis:e.tilt_axis,maxTilt:e.tilt_amount,scale:e.tilt_scale,speed:e.tilt_speed,perspective:1e3})}}elementorFrontend.elementsHandler.attachHandler("pp-image-gallery",e)})}(jQuery);