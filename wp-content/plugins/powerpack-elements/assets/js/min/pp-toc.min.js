!function(o){var e=elementorModules.frontend.handlers.Base.extend({stretchElement:null,getDefaultSettings:function(){return{selectors:{widgetContainer:".pp-toc",container:'.elementor:not([data-elementor-type="header"]):not([data-elementor-type="footer"])',expandButton:".pp-toc__header",collapseButton:".pp-toc__header",body:".pp-toc__body",headerTitle:".pp-toc__header-title",scrollTop:".pp-toc__scroll-to-top--container"},classes:{anchor:"pp-toc-menu-anchor",listWrapper:"pp-toc__list-wrapper",listItem:"pp-toc__list-item",listTextWrapper:"pp-toc__list-item-text-wrapper",firstLevelListItem:"pp-toc__top-level",listItemText:"pp-toc__list-item-text",activeItem:"pp-item-active",headingAnchor:"pp-toc__heading-anchor",collapsed:"pp-toc--collapsed"},listWrapperTag:"numbers"===this.getElementSettings().marker_view?"ol":"ul"}},getDefaultElements:function(){var t=this.getSettings(),e=this.getElementSettings();return{$pageContainer:jQuery(e.container||t.selectors.container),$widgetContainer:this.$element.find(t.selectors.widgetContainer),$expandButton:this.$element.find(t.selectors.expandButton),$collapseButton:this.$element.find(t.selectors.collapseButton),$tocBody:this.$element.find(t.selectors.body),$listItems:this.$element.find("."+t.classes.listItem),$scrollTop:this.$element.find(t.selectors.scrollTop)}},bindEvents:function(){var e=this,t=this.getElementSettings();t.minimize_box&&this.elements.$expandButton.on("click",function(){return o(e.$element).hasClass(e.getSettings("classes.collapsed"))?e.expandBox():e.collapseBox()}).on("keyup",function(t){e.triggerClickOnEnterSpace(t)}),t.collapse_subitems&&this.elements.$listItems.hover(function(t){return jQuery(t.target).slideToggle()}),t.sticky_toc_toggle&&elementorFrontend.elements.$window.on("resize",this.handleStickyToc),t.scroll_to_top_toggle&&this.elements.$scrollTop.on("click",function(){e.scrollToTop()})},triggerClickOnEnterSpace:function(t){13!==t.keyCode&&32!==t.keyCode||(t.currentTarget.click(),t.stopPropagation())},getHeadings:function(){var t=this.getElementSettings(),e=t.headings_by_tags.join(","),i=this.getSettings("selectors"),s=t.exclude_headings_by_selector;return this.elements.$pageContainer.find(e).not(i.headerTitle).filter(function(t,e){return!jQuery(e).closest(s).length})},addAnchorsBeforeHeadings:function(){var e=this.getSettings("classes");this.elements.$headings.before(function(t){return'<span id="'+e.headingAnchor+"-"+t+'" class="'+e.anchor+' "></span>'})},activateItem:function(t){var e,i=this.getSettings("classes");this.deactivateActiveItem(t),t.addClass(i.activeItem),this.$activeItem=t,this.getElementSettings("collapse_subitems")&&(e=void 0,(e=t.hasClass(i.firstLevelListItem)?t.parent().next():t.parents("."+i.listWrapper).eq(-2)).length?(this.$activeList=e,this.$activeList.stop().slideDown()):delete this.$activeList)},deactivateActiveItem:function(t){var e;!this.$activeItem||this.$activeItem.is(t)||(e=this.getSettings().classes,this.$activeItem.removeClass(e.activeItem),!this.$activeList)||t&&this.$activeList[0].contains(t[0])||this.$activeList.slideUp()},followAnchor:function(e,i){var s=this,t=e[0].hash,n=void 0;try{n=jQuery(decodeURIComponent(t))}catch(o){return}0===i&&elementorFrontend.waypoint(n,function(t){s.itemClicked||("down"===t?s.activateItem(e):s.deactivateActiveItem())},{offset:"bottom-in-view",triggerOnce:!1}),elementorFrontend.waypoint(n,function(t){s.itemClicked||("down"===t?s.activateItem(s.$listItemTexts.eq(i+1)):s.activateItem(e))},{offset:0,triggerOnce:!1})},followAnchors:function(){var i=this;this.$listItemTexts.each(function(t,e){return i.followAnchor(jQuery(e),t)})},setOffset:function(t){var e=this.getSettings(),e=this.$element.find("."+e.classes.listItem),i=this.getCurrentDeviceSetting("scroll_offset");e.each(function(){o("a",this).on("click",function(t){t.preventDefault();t=this.hash;o("html, body").animate({scrollTop:o(t).offset().top-parseInt(i.size)},800)})})},populateTOC:function(){var t=this,e=(this.listItemPointer=0,this.getElementSettings());e.hierarchical_view?this.createNestedList():this.createFlatList(),this.$listItemTexts=this.$element.find(".pp-toc__list-item-text"),this.$listItemTexts.on("click",this.onListItemClick.bind(this)),elementorFrontend.isEditMode()||this.followAnchors(),o(window).on("scroll",function(){"window_top"===e.scroll_to_top_option?0<o(window).scrollTop()?t.elements.$scrollTop.show():t.elements.$scrollTop.hide():t.getID().offset().top>=o(window).scrollTop()?t.elements.$scrollTop.hide():t.elements.$scrollTop.show()})},createNestedList:function(){var n=this;this.headingsData.forEach(function(t,e){t.level=0;for(var i=e-1;0<=i;i--){var s=n.headingsData[i];if(s.tag<=t.tag){t.level=s.level,s.tag<t.tag&&t.level++;break}}}),this.elements.$tocBody.html(this.getNestedLevel(0))},createFlatList:function(){this.elements.$tocBody.html(this.getNestedLevel())},getNestedLevel:function(t){for(var e=this.getSettings(),i=this.getElementSettings(),s=this.getElementSettings("icon"),n="<"+e.listWrapperTag+' class="'+e.classes.listWrapper+'">';this.listItemPointer<this.headingsData.length;){var o=this.headingsData[this.listItemPointer],l=e.classes.listItemText;if(0===o.level&&(l+=" "+e.classes.firstLevelListItem),t>o.level)break;t===o.level&&(n=(n+='<li class="'+e.classes.listItem+" level-"+t+'">')+'<div class="'+e.classes.listTextWrapper+'">',l='<a href="#'+e.classes.headingAnchor+"-"+this.listItemPointer+'" class="'+l+'">'+o.text+"</a>",n=n+(l="bullets"===i.marker_view&&s?'<i class="'+s.value+'"></i>'+l:l)+"</div>",this.listItemPointer++,(o=this.headingsData[this.listItemPointer])&&t<o.level&&(n+=this.getNestedLevel(o.level)),n+="</li>")}return n+="</"+e.listWrapperTag+">"},handleNoHeadingsFound:function(){var t=ppToc;if(elementorFrontend.isEditMode())return this.elements.$tocBody.html(t.no_headings_found)},collapseOnInit:function(){var e=this,t=this.getElementSettings("minimized_on"),i=elementorFrontend.getCurrentDeviceMode();0!==(t=""!==t&&"array"!=typeof t?[t]:t).length&&"object"==typeof t&&t.forEach(function(t){("desktop"===t[0]&&"desktop"==i&&o(window).width()<elementorFrontend.config.breakpoints.xxl||"tablet"===t[0]&&"tablet"===i&&o(window).width()<elementorFrontend.config.breakpoints.lg||"mobile"===t[0]&&"mobile"===i&&o(window).width()<elementorFrontend.config.breakpoints.md)&&e.collapseBox()})},setHeadingsData:function(){var i=this;this.headingsData=[],this.elements.$headings.each(function(t,e){i.headingsData.push({tag:+e.nodeName.slice(1),text:e.textContent})})},run:function(){if(elementSettings=this.getElementSettings(),this.elements.$headings=this.getHeadings(),!this.elements.$headings.length)return this.handleNoHeadingsFound();this.setHeadingsData(),elementorFrontend.isEditMode()||this.addAnchorsBeforeHeadings(),this.populateTOC(),elementSettings.minimize_box&&this.collapseOnInit(),elementSettings.sticky_toc_toggle&&this.handleStickyToc();var t=this.getCurrentDeviceSetting("scroll_offset");""!==t.size&&undefined!==t.size&&this.setOffset()},expandBox:function(){var t=this.getCurrentDeviceSetting("min_height");this.$element.removeClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.attr("aria-expanded","true"),this.elements.$tocBody.slideDown(),this.elements.$widgetContainer.css("min-height",t.size+t.unit)},collapseBox:function(){this.$element.addClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.attr("aria-expanded","false"),this.elements.$tocBody.slideUp(),this.elements.$widgetContainer.css("min-height","0px")},onInit:function(){var t=this;this.initElements(),this.bindEvents(),jQuery(document).ready(function(){return t.run()})},onListItemClick:function(t){var e=this,t=(this.itemClicked=!0,setTimeout(function(){return e.itemClicked=!1},2e3),jQuery(t.target)),i=t.parent().next(),s=this.getElementSettings("collapse_subitems"),n=void 0;s&&t.hasClass(this.getSettings("classes.firstLevelListItem"))&&i.is(":visible")&&(n=!0),this.activateItem(t),s&&n&&i.slideUp()},handleStickyToc:function(){var t,e=this.getElementSettings(),i=elementorFrontend.getCurrentDeviceMode(),s=e.sticky_toc_disable_on,n=this.getID(),e=e.sticky_toc_type;"in-place"===e?(t=n.parent().parent().outerWidth(),n.css("width",t),tocWidth=t):"custom-position"===e&&n.css("width",""),-1!==o.inArray(i,s)?(n.removeClass("floating-toc"),o(window).off("scroll",this.stickyScroll)):o(window).on("scroll",o.proxy(this.stickyScroll,this))},stickyScroll:function(){var t=this.getID(),e=(this.getElementSettings(),document.querySelector(".elementor-widget-pp-table-of-contents").getBoundingClientRect()),i=t.outerHeight();t.hasClass("floating-toc")?t.parent().parent().css("height",i):t.parent().parent().css("height",""),e.y+e.height/2<0?t.hasClass("floating-toc")||t.fadeOut(250,function(){t.addClass("floating-toc"),t.fadeIn()}):t.hasClass("floating-toc")&&t.fadeOut(250,function(){t.removeClass("floating-toc"),t.fadeIn()})},scrollToTop:function(){var t;"window_top"===this.getElementSettings("scroll_to_top_option")?o("html, body").animate({scrollTop:0},250):(t=this.getID().parents(".elementor-widget-pp-table-of-contents"),o("html, body").animate({scrollTop:o(t).offset().top-60},250))},getID:function(){return o("#pp-toc-"+this.$element[0].attributes["data-id"].nodeValue)}});jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/pp-table-of-contents.default",function(t){elementorFrontend.elementsHandler.addHandler(e,{$element:t})})})}(jQuery);