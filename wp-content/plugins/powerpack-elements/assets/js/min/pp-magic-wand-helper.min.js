"use strict";window.XdUtils=window.XdUtils||{extend:function(e,n){var t,i=n||{};for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}},window.xdLocalStorage=window.xdLocalStorage||function(){var a,o="cross-domain-local-message",i={iframeId:"cross-domain-iframe",iframeUrl:void 0,initCallback:function(){}},d=-1,r={},n=!1,c=!0;function t(e){var n,t;try{n=JSON.parse(e.data)}catch(e){}n&&n.namespace===o&&("iframe-ready"===n.id?(c=!0,i.initCallback()):r[(t=n).id]&&(r[t.id](t),delete r[t.id]))}function l(e,n,t,i){r[++d]=i;i={namespace:o,id:d,action:e,key:n,value:t};a.contentWindow.postMessage(JSON.stringify(i),"*")}function u(e){i=XdUtils.extend(e,i);e=document.createElement("div");window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent("onmessage",t),e.innerHTML='<iframe id="'+i.iframeId+'" src='+i.iframeUrl+' style="display: none;"></iframe>',document.body.appendChild(e),a=document.getElementById(i.iframeId)}function s(){return n&&c}function f(){return"complete"===document.readyState}return{init:function(e){if(!e.iframeUrl)throw"Please specify the iframe URL";n||(n=!0,f()?u(e):document.addEventListener?document.addEventListener("readystatechange",function(){f()&&u(e)}):document.attachEvent("readystatechange",function(){f()&&u(e)}))},setItem:function(e,n,t){s()&&l("set",e,n,t)},getItem:function(e,n){s()&&l("get",e,null,n)},removeItem:function(e,n){s()&&l("remove",e,null,n)},key:function(e,n){s()&&l("key",e,null,n)},getSize:function(e){s()&&l("size",null,null,e)},getLength:function(e){s()&&l("length",null,null,e)},clear:function(e){s()&&l("clear",null,null,e)},wasInit:function(){return n}}}();