!function(e){"use strict";var o=e("body"),a=e(".htcompare-popup");function t(o){e(".htcompare-table").length>0&&(e(".htcompare-table").replaceWith(o.table),e(".evercompare-copy-link").on("click",(function(o){n(e(this).closest(".ever-compare-shareable-link").find(".evercompare-share-link"),this)})))}function n(o,a){var t=e("<input>");e("body").append(t),t.val(e(o).text()).select(),document.execCommand("copy"),t.remove(),e(a).text(e(a).data("copytext")),setTimeout((function(){e(a).text(e(a).data("btntext"))}),1e3)}o.on("click","a.htcompare-btn",(function(n){var r=e(this),c=r.data("product_id"),p=r.data("added-text");if("yes"===evercompare.popup){if(n.preventDefault(),r.hasClass("added"))return o.find(".htcompare-popup").addClass("open"),!0}else if(r.hasClass("added"))return!0;n.preventDefault(),r.addClass("loading"),e.ajax({url:evercompare.ajaxurl,data:{action:"ever_compare_add_to_compare",id:c,nonce:evercompare.compare_nonce},dataType:"json",method:"GET",success:function(e){e.table?(t(e),"yes"===evercompare.popup?a.addClass("open"):window.location.replace(evercompare.tableurl)):console.log("Something wrong loading compare data")},error:function(e){console.log("Something wrong with AJAX response.")},complete:function(){r.removeClass("loading").addClass("added"),r.html('<span class="htcompare-btn-text">'+p+"</span>")}})})),o.on("click","a.htcompare-remove",(function(o){var a=e(".htcompare-table");o.preventDefault();var n=e(this),r=n.data("product_id");a.addClass("loading"),n.addClass("loading"),jQuery.ajax({url:evercompare.ajaxurl,data:{action:"ever_compare_remove_from_compare",id:r,nonce:evercompare.compare_nonce},dataType:"json",method:"GET",success:function(e){e.table?t(e):console.log("Something wrong loading compare data")},error:function(e){console.log("Something wrong with AJAX response.")},complete:function(){a.removeClass("loading"),n.addClass("loading")}})})),o.on("click",".htcompare-popup-close",(function(o){e(this).parents(".htcompare-popup.open").removeClass("open"),a.removeClass("open")})),e(".evercompare-copy-link").on("click",(function(o){n(e(this).closest(".ever-compare-shareable-link").find(".evercompare-share-link"),this)}))}(jQuery);